import{j as e,P as T,r as c,S as K,u as Q,d as X,L as b}from"./index-Du1wZ1pu.js";import{a as Y}from"./productImages-rNWg_BiP.js";import{T as Z}from"./Title-CaBRCAqF.js";import{u as ee}from"./usePageMetadata-CED4SOpM.js";const o="bg-gradient-to-r from-gray-200 via-gray-100 to-gray-200",R=({showProducts:d=!0})=>e.jsxs("section",{role:"status","aria-live":"polite","aria-label":"Loading mini store details",className:"min-h-screen bg-gray-50",children:[e.jsx("p",{className:"sr-only",children:"Loading mini store details…"}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4 space-y-6 animate-pulse",children:[e.jsxs("div",{className:"flex items-center gap-3","aria-hidden":"true",children:[e.jsx("div",{className:`h-5 w-5 rounded-full ${o}`}),e.jsx("div",{className:`h-4 w-32 rounded-md ${o}`})]}),e.jsx("div",{className:`h-48 md:h-64 w-full rounded-xl ${o}`,"aria-hidden":"true"}),e.jsxs("div",{className:"flex items-center gap-4","aria-hidden":"true",children:[e.jsx("div",{className:`h-20 w-20 rounded-full border-4 border-white ${o}`}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:`h-6 w-40 rounded-md ${o}`}),e.jsx("div",{className:`h-4 w-64 rounded-md ${o}`})]})]}),d&&e.jsxs("div",{className:"space-y-4","aria-hidden":"true",children:[e.jsx("div",{className:`h-5 w-44 rounded-md ${o}`}),e.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:Array.from({length:8}).map((x,r)=>e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:`h-48 md:h-56 w-full rounded-lg ${o}`}),e.jsx("div",{className:`h-4 w-3/4 rounded-md ${o}`}),e.jsx("div",{className:`h-4 w-1/2 rounded-md ${o}`})]},r))})]})]})]});R.propTypes={showProducts:T.bool};const k="bg-gradient-to-r from-gray-200 via-gray-100 to-gray-200",_=({count:d=10})=>e.jsxs("section",{role:"status","aria-live":"polite","aria-label":"Loading creator mini stores",className:"min-h-[50vh]",children:[e.jsx("p",{className:"sr-only",children:"Loading creator mini stores…"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 gap-y-6 animate-pulse",children:Array.from({length:d}).map((x,r)=>e.jsxs("div",{className:"rounded-xl border bg-white p-3 space-y-3","aria-hidden":"true",children:[e.jsx("div",{className:`h-32 md:h-40 w-full rounded-lg ${k}`}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`h-10 w-10 rounded-full ${k}`}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:`h-4 w-3/4 rounded-md ${k}`}),e.jsx("div",{className:`h-3 w-2/3 rounded-md ${k}`})]})]})]},r))})]});_.propTypes={count:T.number};const se=new Set(["","home","about","contact","collection","collections","cart","checkout","privacy-policy","terms","return-refund","faqs","login","signup","admin","api","sitemap.xml","robots.txt","search","account","orders","product","store"]);function ae({limit:d=8}){var U;const{api:x}=c.useContext(K),{slug:r}=Q(),n=(U=X().state)==null?void 0:U.store,[a,p]=c.useState(()=>n??null),[O,j]=c.useState(()=>r?!n:!1),[E,N]=c.useState(""),[v,q]=c.useState([]),[V,F]=c.useState(!0),W=c.useMemo(()=>{var y,P;const s=typeof r=="string"?r.trim().toLowerCase():"",t=!!s,m=String((a==null?void 0:a.displayName)||"").trim(),h=t?m?`${m} Mini Store`:"Creator Mini Store":"Creator Mini Stores",w=t?((P=(y=a==null?void 0:a.bio)==null?void 0:y.trim)==null?void 0:P.call(y))||(m?`Shop curated looks and creator edits from ${m} on TinyMillion.`:"Explore curated products from TinyMillion creators."):"Discover TinyMillion creator mini stores and shop limited edition outfits hand-picked by our community.",g=t?`${m||"TinyMillion"} mini store, TinyMillion creator shops, curated looks`:"TinyMillion mini stores, creator shops, curated boutiques",S=t?(a==null?void 0:a.bannerUrl)||(a==null?void 0:a.avatarUrl):void 0,$=t?`/${s}`:"/store";return{title:h,description:w,keywords:g,canonical:$,image:S,structuredData:({absoluteCanonical:f,pageDescription:I,absoluteImage:G,baseTitle:A,origin:B})=>{var L,z;if(t){const i=Array.isArray(a==null?void 0:a.products)?a.products.slice(0,12).map((l,H)=>{const C=(l==null?void 0:l._id)||(l==null?void 0:l.id);if(!C)return null;const J=`${B}/product/${C}`;return{"@type":"ListItem",position:H+1,url:J,name:l==null?void 0:l.name}}).filter(Boolean):[],M=[{"@context":"https://schema.org","@type":"Store","@id":`${f}#creator-store`,url:f,name:m||A,description:((z=(L=a==null?void 0:a.bio)==null?void 0:L.trim)==null?void 0:z.call(L))||I,image:(a==null?void 0:a.bannerUrl)||(a==null?void 0:a.avatarUrl)||G}];return i.length>0&&M.push({"@context":"https://schema.org","@type":"ItemList","@id":`${f}#store-products`,itemListElement:i}),M}const D=Array.isArray(v)?v.slice(0,d).map((i,M)=>{const l=(i==null?void 0:i.slug)||(i==null?void 0:i.customUrl);return l?{"@type":"ListItem",position:M+1,url:`${B}/${l}`,name:i==null?void 0:i.displayName}:null}).filter(Boolean):[];return[{"@context":"https://schema.org","@type":"CollectionPage","@id":`${f}#mini-stores`,name:A,description:I,url:f},D.length?{"@context":"https://schema.org","@type":"ItemList","@id":`${f}#mini-store-list`,itemListOrder:"http://schema.org/ItemListOrderDescending",itemListElement:D}:null].filter(Boolean)}}},[r,a,v,d]);return ee(W),c.useEffect(()=>{var h,w,g,S;const s=typeof r=="string"?r.trim().toLowerCase():"";if(!s){N(""),p(null),j(!1);return}if(se.has(s)){N("notfound"),p(null),j(!1);return}let t=!1;const m=((w=(h=n==null?void 0:n.slug)==null?void 0:h.toLowerCase)==null?void 0:w.call(h))===s||((S=(g=n==null?void 0:n.customUrl)==null?void 0:g.toLowerCase)==null?void 0:S.call(g))===s;return N(""),m?(p(n),j(!1)):(p(null),j(!0)),(async()=>{var $;try{const{data:u}=await x.get(`/api/ministores/${s}`,{params:{productLimit:24}});t||(p(u),N(""))}catch(u){if(t)return;console.error(u);const y=($=u==null?void 0:u.response)==null?void 0:$.status;N(y===404?"notfound":"network")}finally{t||j(!1)}})(),()=>{t=!0}},[r,x,n]),c.useEffect(()=>{if(r)return;let s=!1;return(async()=>{try{const{data:t}=await x.get("/api/ministores",{params:{limit:d}});s||q(Array.isArray(t)?t:[])}catch(t){s||console.error("Mini stores load failed:",t)}finally{s||F(!1)}})(),()=>{s=!0}},[d,x,r]),r?O&&!a?e.jsx(R,{}):E==="notfound"?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Store Not Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"The store you’re looking for doesn’t exist."}),e.jsx(b,{to:"/store",className:"text-blue-600 hover:underline",children:"← Back to Mini Stores"})]})}):E?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-2",children:"Error Loading Store"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Something went wrong. Please try again."}),e.jsx(b,{to:"/store",className:"text-blue-600 hover:underline",children:"← Back to Mini Stores"})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:e.jsxs(b,{to:"/store",className:"inline-flex items-center text-gray-600 hover:text-gray-900 transition",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Mini Stores"]})}),(a==null?void 0:a.bannerUrl)&&e.jsx("div",{className:"w-full h-48 md:h-64 bg-gray-200",children:e.jsx("img",{src:a.bannerUrl,alt:a.displayName,loading:"lazy",decoding:"async",className:"w-full h-full object-cover"})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6 md:py-8",children:e.jsxs("div",{className:"flex items-center gap-4 md:gap-6",children:[(a==null?void 0:a.avatarUrl)&&e.jsx("img",{className:"w-16 h-16 md:w-20 md:h-20 rounded-full object-cover border-4 border-white shadow-lg",src:a.avatarUrl,alt:a.displayName,loading:"lazy",decoding:"async"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:a==null?void 0:a.displayName}),(a==null?void 0:a.bio)&&e.jsx("p",{className:"text-sm md:text-base text-gray-600 mt-1",children:a.bio})]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 pb-12",children:[e.jsx("h2",{className:"text-xl font-semibold mb-6 text-gray-800",children:"Products"}),!(a!=null&&a.products)||a.products.length===0?e.jsx("div",{className:"text-center py-12 bg-white rounded-lg shadow",children:e.jsx("p",{className:"text-gray-500",children:"No products available in this store yet."})}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6",children:a.products.map(s=>{const t=Y(s)||"https://tinymillion.com/images/default-product.png";return e.jsxs(b,{to:`/product/${(s==null?void 0:s._id)||(s==null?void 0:s.id)||""}`,className:"bg-white border rounded-lg overflow-hidden hover:shadow-lg transition-shadow duration-300 group",children:[e.jsx("div",{className:"relative overflow-hidden",children:e.jsx("img",{src:t,alt:(s==null?void 0:s.name)||"Product",loading:"lazy",decoding:"async",className:"w-full h-48 md:h-56 object-cover group-hover:scale-105 transition-transform duration-300"})}),e.jsxs("div",{className:"p-3",children:[e.jsx("div",{className:"text-sm font-medium line-clamp-2 text-gray-800 mb-1",children:(s==null?void 0:s.name)||"Product"}),typeof(s==null?void 0:s.price)=="number"&&!Number.isNaN(s.price)&&e.jsxs("div",{className:"text-base font-bold text-gray-900",children:["₹",s.price.toLocaleString()]})]})]},(s==null?void 0:s._id)||(s==null?void 0:s.id))})})]})]}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx(Z,{text1:"CREATOR",text2:"MINI STORES"}),e.jsx("p",{className:"w-full md:w-3/4 mx-auto text-xs sm:text-sm md:text-base text-gray-600 mt-4",children:"Discover the newest styles and trends curated by TinyMillion - where fashion meets individuality."})]}),V?e.jsx(_,{count:d}):v.length===0?e.jsx("div",{className:"text-center py-12 bg-white rounded-lg shadow",children:e.jsx("p",{className:"text-gray-500",children:"No mini stores available yet."})}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 gap-y-6",children:v.map(s=>e.jsxs(b,{to:`/${s.slug}`,state:{store:s},className:"group bg-white border rounded-xl overflow-hidden hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:[e.jsx("div",{className:"w-full h-32 md:h-40 bg-gradient-to-br from-gray-100 to-gray-200",children:s.bannerUrl?e.jsx("img",{src:s.bannerUrl,alt:s.displayName,loading:"lazy",decoding:"async",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):e.jsx("img",{src:"https://tinymillion.com/images/default-banner.png",alt:"Default Banner",loading:"lazy",decoding:"async",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"p-3 flex items-center gap-3",children:[e.jsx("img",{src:s.avatarUrl||"https://tinymillion.com/images/default-avatar.png",alt:s.displayName,loading:"lazy",decoding:"async",className:"w-10 h-10 rounded-full object-cover border-2 border-gray-200"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"font-medium truncate text-gray-900 group-hover:text-blue-600 transition-colors",children:s.displayName}),s.bio&&e.jsx("div",{className:"text-xs text-gray-500 line-clamp-1",children:s.bio})]})]})]},s.slug))})]})})}ae.propTypes={limit:T.number};export{ae as default};
