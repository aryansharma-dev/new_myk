const l="res.cloudinary.com";const h=(t,e=400)=>{if(typeof t!="string")return"";const n=t.trim();if(!n)return"";try{const r=new URL(n);if(!r.hostname.includes(l))return n;const[i,u]=r.pathname.split("/upload/");if(u===void 0)return n;const o=u.split("/").filter(Boolean),m=["f_auto","q_auto","c_fill",`w_${e}`];if(!o.length)return r.pathname=`${i}/upload/${m.join(",")}`,r.toString();const a=o[0];if(a.startsWith("v")&&Number.isFinite(Number(a.slice(1))))return r.pathname=`${i}/upload/${m.join(",")}/${o.join("/")}`,r.toString();const d=a.split(",").filter(Boolean),f=[...m];return d.forEach(s=>{s&&(s.startsWith("w_")||s==="f_auto"||s==="q_auto"||s==="c_fill"||f.includes(s)||f.push(s))}),o[0]=f.join(","),r.pathname=`${i}/upload/${o.join("/")}`,r.toString()}catch{return n}},c=(t,e={})=>{const n=Number(e.width)>0?Number(e.width):400;if(typeof t!="string")return"";const r=t.trim();return r?r.includes(l)?h(r,n):r:""},g=t=>t?Array.isArray(t)?t.filter(e=>typeof e=="string"&&e.trim().length>0):typeof t=="string"&&t.trim().length>0?[t.trim()]:[]:[],p=(t,e={})=>{if(!t)return[];const n=g(t.images);if(n.length)return n.map(i=>c(i,e));const r=g(t.image);return r.length?r.map(i=>c(i,e)):[]},I=(t,e={})=>{const[n]=p(t,e);return n||""};export{I as a,p as g};
